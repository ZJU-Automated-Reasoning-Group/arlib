

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Model Counting &mdash; Arlib Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=a74d790d"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SMT Solving for Finite Field" href="ff.html" />
    <link rel="prev" title="Constrained Horn Clauses (CHC) Tools" href="chctools.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Arlib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="topics.html">Research Topics and Thesis Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="abduction.html">Abduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="allsmt.html">AllSMT</a></li>
<li class="toctree-l1"><a class="reference internal" href="automata.html">Automata</a></li>
<li class="toctree-l1"><a class="reference internal" href="automata.html#introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="automata.html#components">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="automata.html#applications">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="automata.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="backbone.html">Backbone Computation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cfl.html">Context-Free Language Reachability</a></li>
<li class="toctree-l1"><a class="reference internal" href="cfl.html#introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="cfl.html#components">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="cfl.html#applications">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="cfl.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="chctools.html">Constrained Horn Clauses (CHC) Tools</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Model Counting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction-to-model-counting">Introduction to Model Counting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#model-counting-in-arlib">Model Counting in Arlib</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#model-counting-for-sat-formulas">Model Counting for SAT Formulas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-counting-for-qf-bv-formulas">Model Counting for QF_BV Formulas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-features">Advanced Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#projected-model-counting">Projected Model Counting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#approximate-model-counting">Approximate Model Counting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ff.html">SMT Solving for Finite Field</a></li>
<li class="toctree-l1"><a class="reference internal" href="ff.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="itp.html">Interactive Theorem Proving (ITP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html">LLM Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#components">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#applications">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="monabs.html">Monadic Predicate Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimization.html">Optimization Modulo Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="pcdclt.html">Parallel SMT CDCL(T) Solving</a></li>
<li class="toctree-l1"><a class="reference internal" href="polyhorn.html">PolyHorn: Polynomial Horn Clause Solver</a></li>
<li class="toctree-l1"><a class="reference internal" href="prob.html">Probabilistic Reasoning (arlib/prob)</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantifiers.html">Playing wth Quantifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling.html">Model Sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="smt.html">SMT Solving</a></li>
<li class="toctree-l1"><a class="reference internal" href="symbolic_abstraction.html">Symbolic Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="symautomata.html">Symbolic Finite Automata</a></li>
<li class="toctree-l1"><a class="reference internal" href="synthesis.html">Program Synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="synthesis.html#introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="synthesis.html#components">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="synthesis.html#applications">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="synthesis.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="unification.html">Unification</a></li>
<li class="toctree-l1"><a class="reference internal" href="unification.html#introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="unification.html#components">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="unification.html#applications">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="unification.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="unsat_core.html">UNSAT Core Extraction</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Arlib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Model Counting</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/counting.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="model-counting">
<h1>Model Counting<a class="headerlink" href="#model-counting" title="Link to this heading"></a></h1>
<section id="introduction-to-model-counting">
<h2>Introduction to Model Counting<a class="headerlink" href="#introduction-to-model-counting" title="Link to this heading"></a></h2>
<p>Model counting is the problem of determining the number of possible solutions
(models) to a given formula. It is a fundamental problem in computer
science and has applications in various fields such as artificial intelligence, cryptography, and verification.
The complexity of model counting varies depending on the logic and constraints involved.
For Boolean satisfiability (SAT), model counting is #P-complete.</p>
</section>
<section id="model-counting-in-arlib">
<h2>Model Counting in Arlib<a class="headerlink" href="#model-counting-in-arlib" title="Link to this heading"></a></h2>
<section id="model-counting-for-sat-formulas">
<h3>Model Counting for SAT Formulas<a class="headerlink" href="#model-counting-for-sat-formulas" title="Link to this heading"></a></h3>
<p>To count models for SAT formulas, please use <code class="docutils literal notranslate"><span class="pre">sharpSAT</span></code> or other third-party tools.
SharpSAT is an efficient model counter for Boolean formulas in CNF format.</p>
<p>Example usage: (to implement)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># FIXME: to make it more conveinent for the users</span>
<span class="c1"># we should allow for counting the models of a z3 exper or pysmt expr</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">arlib.bool.counting</span><span class="w"> </span><span class="kn">import</span> <span class="n">count_models</span>  <span class="c1"># TBD</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">arlib.logic</span><span class="w"> </span><span class="kn">import</span> <span class="c1"># TBD</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pysat</span><span class="w"> </span><span class="kn">import</span> <span class="o">...</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">z3</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pysmt</span>

<span class="c1"># Create a CNF formula</span>
<span class="n">cnf</span> <span class="o">=</span> <span class="n">CNF</span><span class="p">()</span>
<span class="n">cnf</span><span class="o">.</span><span class="n">add_clause</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>  <span class="c1"># x1 OR x2</span>
<span class="n">cnf</span><span class="o">.</span><span class="n">add_clause</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c1"># NOT x1 OR x3</span>

<span class="c1"># Count models</span>
<span class="n">count</span> <span class="o">=</span> <span class="n">count_models</span><span class="p">(</span><span class="n">cnf</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of solutions: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="model-counting-for-qf-bv-formulas">
<h3>Model Counting for QF_BV Formulas<a class="headerlink" href="#model-counting-for-qf-bv-formulas" title="Link to this heading"></a></h3>
<p>QF_BV stands for the quantifier-free bit-vector logic. It is a subset of the SMT-LIB standard and is commonly used in the analysis and verification
of computer hardware and software systems.</p>
<p>To count the models of a QF_BV formula, refer to
- <code class="docutils literal notranslate"><span class="pre">arlib\bv\qfbv_counting.py</span></code>.
- <code class="docutils literal notranslate"><span class="pre">arlib\tests\test_bv_counting.py</span></code></p>
<p>Example usage: (to implement)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">arlib.bv</span><span class="w"> </span><span class="kn">import</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">arlib.bv.qfbv_counting</span><span class="w"> </span><span class="kn">import</span> <span class="n">count_bv_models</span>
<span class="c1"># Create bit-vector variables</span>

<span class="c1"># Create a formula: x + y &lt; 10</span>

<span class="c1"># Count models</span>
<span class="n">count</span> <span class="o">=</span> <span class="n">count_bv_models</span><span class="p">(</span><span class="n">formula</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Number of solutions: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that we rely on sharpSAT for the implementation. Currently, you need to either copy a
binary version of sharpSAT to <code class="docutils literal notranslate"><span class="pre">bin_solvers</span></code> or install a sharpSAT globally.</p>
</section>
</section>
<section id="advanced-features">
<h2>Advanced Features<a class="headerlink" href="#advanced-features" title="Link to this heading"></a></h2>
<section id="projected-model-counting">
<h3>Projected Model Counting<a class="headerlink" href="#projected-model-counting" title="Link to this heading"></a></h3>
<p>Projected model counting involves counting models while considering only a subset of variables.
This is useful when you’re only interested in specific variables’ solutions.</p>
</section>
<section id="approximate-model-counting">
<h3>Approximate Model Counting<a class="headerlink" href="#approximate-model-counting" title="Link to this heading"></a></h3>
<p>For large formulas where exact counting is impractical, approximate model counting can be used.</p>
</section>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="chctools.html" class="btn btn-neutral float-left" title="Constrained Horn Clauses (CHC) Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ff.html" class="btn btn-neutral float-right" title="SMT Solving for Finite Field" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024-2025, ZJU Automated Reasoning Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>